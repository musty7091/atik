{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>POS Cihazları</h2>

  <form method="post" action="{{ url_for('admin.pos_add') }}" class="row">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <div>
      <label>POS No (slipte yazan)</label>
      <input name="pos_no" required>
    </div>

    <div>
      <label>POS Adı</label>
      <input name="ad" required>
    </div>

    <div>
      <label>Banka</label>
      <select name="banka_id" required>
        <option value="">Banka seç</option>
        {% for b in bankalar %}
          {% if b.aktif %}
            <option value="{{ b.id }}">{{ b.ad }}</option>
          {% endif %}
        {% endfor %}
      </select>
    </div>

    <div>
      <label>Komisyon Oranı</label>
      <input name="komisyon_orani" placeholder="2.5 (veya 0.025)" />
    </div>

    <div style="display:flex; align-items:end;">
      <button type="submit">POS Ekle</button>
    </div>
  </form>

  <hr/>

  <table class="tbl">
    <thead>
      <tr>
        <th>POS No</th>
        <th>POS</th>
        <th>Banka</th>
        <th>Komisyon</th>
        <th>Durum</th>
      </tr>
    </thead>
    <tbody>
      {% for p in poslar %}
      <tr>
        <td><b>{{ p.pos_no or "-" }}</b></td>
        <td>{{ p.ad }}</td>
        <td>{{ p.banka.ad if p.banka else "-" }}</td>
        <td>{{ (p.komisyon_orani * 100) | round(2) }}%</td>
        <td>
          {% if p.aktif %}
            <span class="pill ok">Aktif</span>
          {% else %}
            <span class="pill off">Pasif</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<style>
  .row{ display:grid; grid-template-columns: 1fr 1fr 1fr 1fr auto; gap:10px; align-items:end; }
  @media (max-width: 900px){ .row{ grid-template-columns: 1fr; } }
  .tbl{ width:100%; border-collapse: collapse; font-size:14px; }
  .tbl th, .tbl td{ padding:10px; border-top:1px solid #e5e7eb; vertical-align: middle; }
  .pill{ padding:4px 10px; border-radius:999px; font-weight:800; font-size:12px; display:inline-block; }
  .pill.ok{ background:#dcfce7; color:#166534; }
  .pill.off{ background:#fee2e2; color:#991b1b; }
</style>
{% endblock %}
